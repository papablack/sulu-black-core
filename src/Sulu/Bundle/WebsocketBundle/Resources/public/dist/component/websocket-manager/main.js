define(["websocket/wrapper","websocket/dummy"],function(a,b){"use strict";var c={enabled:!1,port:9876,httpHost:"localhost",ssl:!1};return{apps:{},clients:{},config:{},url:null,init:function(a,b){this.config=a,this.apps=b},getConfig:function(a){return this.config[a]||c[a]},getUrl:function(a){if(null===this.url){var b=this.getConfig("httpHost"),c=this.getConfig("port"),d=this.getConfig("ssl");this.url=[d?"wss://":"ws://",b,":",c].join("")}return this.url+this.apps[a].route},getClient:function(a){return this.clients[a]||(this.clients[a]=this.createClient(a),this.clients[a].connect()),this.clients[a]},createClient:function(b){return new a(this.apps[b],this.getUrl(b),this.getConfig("enabled"))},createDummyClient:function(a){return new b(this.apps[a])}}});